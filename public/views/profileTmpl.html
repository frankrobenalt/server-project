
<section class="nav">
        <div class="dropdown">
            <i class="fa fa-align-justify fa-2x" ng-click="dropdown()" aria-hidden="true"></i>
            <div id="myDropdown" class="dropdown-content">
                <a ng-click="logOut()">Log Out</a>
            </div>
        </div>
        <h2>GoalBank</h2>
</section>

<!-- profile section -->

<section class="profileContainer">
    <div class="profileHeader">
        <div class="inlineboi">
        <h1 id="poo">Goals</h1>
        <i class="fa fa-plus-square-o fa-2x" ui-sref="addGoal" aria-hidden="true"></i>
            <div class="deleteContainer">
                <embed id="delete" ondrop="drop(event)" ondragover="allowDrop(event)" type="image/svg+xml" src="../images/trash.svg"/>
            </div>
        </div>
        <h3>{{currentUser.first_name}} {{currentUser.last_name}}</h3>
    </div>
    
<!-- goals -->

<div class="goalsWrapper" ng-hide="hideExGoals">
    <h1>Exercise</h1>
    <div class="goalWrapper" id="goal{{goal.goalid}}"ng-repeat="goal in exerciseGoals track by $index" draggable="true" ondragstart="drag(event)">
        <div class="goal" ng-click="showInfo(goal.goalid, $event)" ng-hide="goalModal">
            <img class="statusImg" ng-click="goalModal=true"ng-src="{{goal.image}}">
            <div class="title">{{goal.goal}}</div> 
            <div ng-hide="goal.logged_today" class="logButtons">
                <img src="../images/check.gif" ng-click="updateProgress({goalid: goal.goalid, sof: true, value: 1})" >
                <img src="../images/x.gif" ng-click="updateProgress({goalid: goal.goalid, sof: false, value: 0})" >
            <!-- <i ng-click="updateProgress({goalid: goal.goalid, sof: true, value: 1})" class="fa fa-check" style="color:green" aria-hidden="true"></i> -->
            <!-- <i ng-click="updateProgress({goalid: goal.goalid, sof: false, value: 0})" class="fa fa-times" style="color:red" aria-hidden="true"></i> -->
            </div>
            <div class="status" ng-show="goal.logged_today">
                <p class="small">This week:</p>
                <p>{{goal.progress}}/{{goal.timesperweek}}</p>
            </div>
            <!-- <i ng-click="goalDropdown = true" ng-hide="goalDropdown" class="fa fa-chevron-down" aria-hidden="true"></i>         
            <i class="fa fa-chevron-up" ng-click="goalDropdown = false" ng-show="goalDropdown" aria-hidden="true"></i>        -->
        </div>
            <div class="changeToday" ng-show="goalModal">
                <img class="statusImg" ng-src="{{goal.image}}">
                <div class="small">Change today's log?</div>
                <div class="logButtons">
                <img src="../images/check.gif" ng-click="goalModal=false;updateProgress({goalid: goal.goalid, sof: true, value: 1})" >
                <img src="../images/x.gif" ng-click="goalModal=false;updateProgress({goalid: goal.goalid, sof: false, value: -1})" > 
                </div>
                <i class="fa fa-window-close-o" ng-click="goalModal=false" aria-hidden="true"></i>
            </div> 
            <div class="goalInfo" id="goalInfo{{goal.goalid}}">
                <div class="small inlineboi"> 
                <a class="smaller" ng-click="getHistory(goal)">Show All Logs</a>   
                <span class="title">This week's logs</span>
  
                </div>
                    <table id="cal{{goal.goalid}}" class="cal">
                            <thead>
                                <tr>
                                    <th ng-repeat="date in dates">{{ date | date: "MMM d" }}</th>
                                    <th>Total &#10004;'s</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                 <td id="day" ng-repeat="day in goal.log_data track by $index" ><a ng-click="goalMod({index: $index, goal: goal})"><img ng-src='{{day}}'></a></td>
                                 <td class="number">{{goal.progress}}/{{goal.timesperweek}}</td>
                                </tr>
                                <!-- <tr><td ng-repeat="day in goal.log_data track by $index"><p ng-click="goalModal=true">update</p></td></tr> -->
                            </tbody>
                    </table>
                <div class="inline">
                    <div class="status">
                            <p>This week: <div class="inlineboi"><div class="number">{{goal.progress}}/{{goal.timesperweek}}</div></div></p>                            
                            <div class="inlineboi"><p>Goal: <div class="number">{{goal.timesperweek}} </div> times/week</div></p>
                    </div>
                    <div class="wager">
                    <div>Wager: </div><div class="number">${{goal.wager}}/{{goal.wager_option}}</div>
                    <span class="timeLeft">
                            {{goal.time_left}}
                    </span>
                    </div>
                </div>
                <span class="small"><a ng-click="deleteGoal(goal.goalid)">Delete Goal</a></span>                
            </div>
    </div>
</div>
<!-- modify goal by day modal -->
<div class="goalModalWrapper" ng-show="modifyDay">
<div class="modifyDay">
        <h2>{{clickedDate | date: 'EEEE, MMMM, d, y'}}</h2>
        <div class="inlineboi">
            <p class="medium">Your Log:</p>
            <img ng-src="{{curImg}}">
        </div>
        <div class="modalColumn">
        <div class="medium">Change log?</div>
        <div class="logButtons">
        <img src="../images/check.gif" ng-click="updateDate({goalid: curId, sof: true, date: clickedDate, value: 1});modifyDay=false" >
        <img src="../images/x.gif" ng-click="updateDate({goalid: curId, sof: false, date: clickedDate, value: -1});modifyDay=false" > 
        </div>
        </div>
        <a ng-click="modifyDay=false" class="bottom">close</a>
</div>
</div>


<section class="goalsWrapper" ng-hide="hideSave">
    <h1>Savings</h1>
    <div class="goalWrapper" ng-repeat="goal in savingsGoals track by goal.id">
        <div class="goal">
            <img class="statusImg" src="../images/$.gif">
            <div class-"title">{{goal.goal}}</div>
            <div class="status">
                    <p class="small">Total Saved:</p>
                    <p>${{goal.progress}}/${{goal.savings_goal}}</p>
            </div>
            <i ng-click="goalDropdown = true" ng-hide="goalDropdown" class="fa fa-chevron-down" aria-hidden="true"></i>         
            <i class="fa fa-chevron-up" ng-click="goalDropdown = false" ng-show="goalDropdown" aria-hidden="true"></i>  
        </div>
        <div class="goalInfo" ng-show="goalDropdown">
            <div class="addToSavings">
            Add to savings: $<input ng-model="amount" placeholder="amount">
            <a ng-click="addSavings({addition: amount, id: goal.id})">Add</a>
            </div>
            <div class="status">
            <p>Next Log: {{goal.next_log | date: 'EEEE, MMMM d'}}</p>
            <p>End Date: {{goal.end_date | date: 'EEEE, MMMM, d, y'}}</p>
            </div>
            <span class="small"><a ng-click="deleteSavingsGoal(goal.id)">Delete Goal</a></span>
        </div>
    </div>
</section>
</section>



